name: Repository Metrics
on:
  schedule: [{cron: "0 0 * * *"}] # 毎日深夜0時に更新
  workflow_dispatch:              # 手動実行も可能にする
jobs:
  github-metrics:
    runs-on: ubuntu-latest
    steps:

      - uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.PERSONAL_ACCESS_TOKEN }}
          base: header

          # --- Languages プラグインの設定 ---
          plugin_languages: yes
          plugin_languages_ignored: html, css # 補助的な言語を除外してプロっぽく見せる
          # plugin_languages_sections: most-used, recently-used # 「よく使う言語」と「最近の活動」を表示
          plugin_languages_sections: most-used # 「よく使う言語」を表示
          # plugin_languages_recent_days: 14    # 過去14日間の活動を分析
          # plugin_languages_recent_load: 300   # 分析するイベント数
          plugin_languages_limit: 8           # 表示する言語数

          # --- インデプス分析（より詳細な分析） ---
          plugin_languages_indepth: yes
          # plugin_languages_indepth_recent_days: 30 # 過去30日間の活動を分析
          # plugin_languages_indepth_load: 500      # 分析するイベント数
          # plugin_languages_indepth_limit: 5       # 表示する言語数

          # --- 保存ファイル名 ---
          filename: languages-metrics.svg
